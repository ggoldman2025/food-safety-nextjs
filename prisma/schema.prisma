generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String    @id @default(cuid())
  clerkId            String    @unique
  email              String    @unique
  name               String?
  firstName          String?
  lastName           String?
  imageUrl           String?
  role               String    @default("user")
  isPremium          Boolean   @default(false)
  subscriptionStatus String?
  subscriptionId     String?
  trialEndsAt        DateTime?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
}

model CompanyLink {
  id          String   @id @default(cuid())
  name        String
  url         String
  logo        String?
  category    String   @default("grocery")
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Recall {
  id                    String    @id @default(cuid())
  recallNumber          String    @unique
  source                String    // 'FDA', 'USDA', 'CPSC'
  title                 String
  productDescription    String    @db.Text
  reasonForRecall       String    @db.Text
  companyName           String
  classification        String?   // 'Class I', 'Class II', 'Class III'
  distributionPattern   String?   @db.Text
  state                 String?   // Two-letter state code
  recallInitiationDate  DateTime
  reportDate            DateTime?
  productType           String?   // 'Food', 'Meat', 'Poultry', 'Consumer Product'
  hazard                String?   @db.Text
  status                String    @default("Active")
  imageUrl              String?
  sourceUrl             String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  @@index([source])
  @@index([state])
  @@index([recallInitiationDate])
  @@index([classification])
  @@index([status])
}
